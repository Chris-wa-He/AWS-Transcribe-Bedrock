# Bedrockæ¨¡å‹é”™è¯¯å¤„ç†æŒ‡å— | Bedrock Model Error Handling Guide

## ğŸš¨ å¸¸è§é”™è¯¯ | Common Errors

### 1. ä¸æ”¯æŒæŒ‰éœ€è°ƒç”¨é”™è¯¯ | On-Demand Throughput Not Supported Error

**é”™è¯¯ä¿¡æ¯ | Error Message:**
```
ValidationException: Invocation of model ID anthropic.claude-3-7-sonnet-20250219-v1:0 with on-demand throughput isn't supported. Retry your request with the ID or ARN of an inference profile that contains this model.
```

**åŸå›  | Cause:**
æŸäº›è¾ƒæ–°çš„Bedrockæ¨¡å‹ï¼ˆå¦‚Claude 3.7 Sonnetã€Claude 4ç³»åˆ—ï¼‰ä¸æ”¯æŒç›´æ¥çš„æŒ‰éœ€è°ƒç”¨ï¼Œéœ€è¦ä½¿ç”¨æ¨ç†é…ç½®æ–‡ä»¶ï¼ˆinference profileï¼‰ã€‚

**è§£å†³æ–¹æ¡ˆ | Solutions:**

#### æ–¹æ¡ˆ1ï¼šè‡ªåŠ¨æ¨¡å‹åˆ‡æ¢ï¼ˆæ¨èï¼‰âœ…
åº”ç”¨å·²ç»å®ç°äº†è‡ªåŠ¨æ¨¡å‹éªŒè¯å’Œåˆ‡æ¢åŠŸèƒ½ï¼š

- å½“é€‰æ‹©ä¸æ”¯æŒçš„æ¨¡å‹æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°é»˜è®¤çš„æ”¯æŒæ¨¡å‹
- ç”¨æˆ·ä¼šçœ‹åˆ°æ—¥å¿—æç¤ºæ¨¡å‹å·²è¢«æ›´æ”¹
- ä¸éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ“ä½œ

#### æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨é€‰æ‹©æ”¯æŒçš„æ¨¡å‹
åœ¨åº”ç”¨ç•Œé¢ä¸­é€‰æ‹©ä»¥ä¸‹æ”¯æŒæŒ‰éœ€è°ƒç”¨çš„æ¨¡å‹ï¼š

**æ¨èçš„Claudeæ¨¡å‹:**
- `anthropic.claude-3-5-sonnet-20241022-v2:0` (é»˜è®¤)
- `anthropic.claude-3-sonnet-20240229-v1:0`
- `anthropic.claude-3-haiku-20240307-v1:0`

**æ¨èçš„Novaæ¨¡å‹:**
- `amazon.nova-pro-v1:0`
- `amazon.nova-lite-v1:0`
- `amazon.nova-micro-v1:0`

### 2. ä¸æ”¯æŒçš„æ¨¡å‹åˆ—è¡¨ | Unsupported Models List

ä»¥ä¸‹æ¨¡å‹**ä¸æ”¯æŒ**æŒ‰éœ€è°ƒç”¨ï¼Œä¼šè¢«è‡ªåŠ¨è¿‡æ»¤æˆ–åˆ‡æ¢ï¼š

```
âŒ anthropic.claude-3-7-sonnet-20250219-v1:0    # Claude 3.7 Sonnet
âŒ anthropic.claude-opus-4-20250514-v1:0        # Claude Opus 4
âŒ anthropic.claude-sonnet-4-20250514-v1:0      # Claude Sonnet 4
```

## ğŸ”§ æ•…éšœæ’é™¤æ­¥éª¤ | Troubleshooting Steps

### æ­¥éª¤1ï¼šæ£€æŸ¥å½“å‰æ¨¡å‹é…ç½®
```bash
# è¿è¡Œæ¨¡å‹éªŒè¯æµ‹è¯•
make model-validation

# æŸ¥çœ‹å¯ç”¨æ¨¡å‹åˆ—è¡¨
make model-test
```

### æ­¥éª¤2ï¼šéªŒè¯AWSé…ç½®
```bash
# è¯Šæ–­AWSå‡­è¯å’Œæƒé™
make aws-diagnose
```

### æ­¥éª¤3ï¼šæ£€æŸ¥åº”ç”¨æ—¥å¿—
æŸ¥çœ‹åº”ç”¨æ—¥å¿—ä¸­çš„æ¨¡å‹åˆ‡æ¢ä¿¡æ¯ï¼š
```
æ¨¡å‹å·²ä» anthropic.claude-3-7-sonnet-20250219-v1:0 æ›´æ”¹ä¸º anthropic.claude-3-5-sonnet-20241022-v2:0
```

## ğŸ›¡ï¸ é¢„é˜²æªæ–½ | Prevention Measures

### 1. è‡ªåŠ¨æ¨¡å‹è¿‡æ»¤
åº”ç”¨å·²å®ç°ä»¥ä¸‹ä¿æŠ¤æœºåˆ¶ï¼š

- **æ¨¡å‹é»‘åå•**: è‡ªåŠ¨æ’é™¤å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å‹
- **æ¨¡å¼åŒ¹é…**: æ£€æµ‹æ¨¡å‹åç§°ä¸­çš„ä¸æ”¯æŒæ¨¡å¼
- **è‡ªåŠ¨åˆ‡æ¢**: ä¸æ”¯æŒçš„æ¨¡å‹è‡ªåŠ¨åˆ‡æ¢åˆ°é»˜è®¤æ¨¡å‹

### 2. ç”¨æˆ·ç•Œé¢ä¼˜åŒ–
- æ¨¡å‹é€‰æ‹©åˆ—è¡¨åªæ˜¾ç¤ºæ”¯æŒæŒ‰éœ€è°ƒç”¨çš„æ¨¡å‹
- ä¸æ”¯æŒçš„æ¨¡å‹ä¸ä¼šå‡ºç°åœ¨ä¸‹æ‹‰èœå•ä¸­
- æä¾›æ¨¡å‹å‹å¥½åç§°è€Œä¸æ˜¯æŠ€æœ¯ID

### 3. æ—¥å¿—å’Œç›‘æ§
- è¯¦ç»†çš„æ¨¡å‹åˆ‡æ¢æ—¥å¿—
- é”™è¯¯å¤„ç†å’Œå›é€€æœºåˆ¶
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

## ğŸ“Š æ¨¡å‹æ€§èƒ½å¯¹æ¯” | Model Performance Comparison

| æ¨¡å‹ç³»åˆ— | æ”¯æŒçŠ¶æ€ | æ€§èƒ½ | æˆæœ¬ | æ¨èç”¨é€” |
|---------|---------|------|------|---------|
| Claude 3.5 Sonnet | âœ… æ”¯æŒ | é«˜ | ä¸­ç­‰ | é€šç”¨æ–‡æœ¬å¤„ç† |
| Claude 3 Sonnet | âœ… æ”¯æŒ | ä¸­é«˜ | ä¸­ç­‰ | å¹³è¡¡æ€§èƒ½å’Œæˆæœ¬ |
| Claude 3 Haiku | âœ… æ”¯æŒ | ä¸­ç­‰ | ä½ | å¿«é€Ÿå“åº”åœºæ™¯ |
| Nova Pro | âœ… æ”¯æŒ | é«˜ | ä¸­ç­‰ | å¤æ‚ä»»åŠ¡å¤„ç† |
| Nova Lite | âœ… æ”¯æŒ | ä¸­ç­‰ | ä½ | è½»é‡çº§ä»»åŠ¡ |
| Nova Micro | âœ… æ”¯æŒ | ä½ | å¾ˆä½ | ç®€å•æ–‡æœ¬å¤„ç† |

## ğŸ”® æœªæ¥æ”¯æŒ | Future Support

### æ¨ç†é…ç½®æ–‡ä»¶æ”¯æŒ
æœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šæ·»åŠ å¯¹æ¨ç†é…ç½®æ–‡ä»¶çš„æ”¯æŒï¼Œä»¥ä½¿ç”¨æ›´æ–°çš„æ¨¡å‹ï¼š

```python
# æœªæ¥å¯èƒ½çš„å®ç°
def create_inference_profile(model_id):
    """åˆ›å»ºæ¨ç†é…ç½®æ–‡ä»¶ä»¥æ”¯æŒæ–°æ¨¡å‹"""
    # å®ç°æ¨ç†é…ç½®æ–‡ä»¶åˆ›å»ºé€»è¾‘
    pass
```

### åŠ¨æ€æ¨¡å‹æ£€æµ‹
è®¡åˆ’å®ç°åŠ¨æ€æ£€æµ‹æ¨¡å‹æ”¯æŒçŠ¶æ€çš„åŠŸèƒ½ï¼š

```python
def check_model_support_dynamically(model_id):
    """åŠ¨æ€æ£€æŸ¥æ¨¡å‹æ˜¯å¦æ”¯æŒæŒ‰éœ€è°ƒç”¨"""
    # å®ç°åŠ¨æ€æ£€æµ‹é€»è¾‘
    pass
```

## ğŸ“ è·å–å¸®åŠ© | Getting Help

å¦‚æœé‡åˆ°æ¨¡å‹ç›¸å…³é—®é¢˜ï¼š

1. **æ£€æŸ¥æ—¥å¿—**: æŸ¥çœ‹ `logs/voice_assistant.log` ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. **è¿è¡Œè¯Šæ–­**: ä½¿ç”¨ `make aws-diagnose` æ£€æŸ¥AWSé…ç½®
3. **éªŒè¯æ¨¡å‹**: ä½¿ç”¨ `make model-validation` æµ‹è¯•æ¨¡å‹æ”¯æŒçŠ¶æ€
4. **æŸ¥çœ‹æ–‡æ¡£**: å‚è€ƒAWS Bedrockå®˜æ–¹æ–‡æ¡£äº†è§£æœ€æ–°æ¨¡å‹æ”¯æŒæƒ…å†µ

## ğŸ”— ç›¸å…³èµ„æº | Related Resources

- [AWS Bedrockç”¨æˆ·æŒ‡å—](https://docs.aws.amazon.com/bedrock/latest/userguide/)
- [Bedrockæ¨¡å‹æ”¯æŒæ–‡æ¡£](https://docs.aws.amazon.com/bedrock/latest/userguide/models-supported.html)
- [æ¨ç†é…ç½®æ–‡ä»¶æ–‡æ¡£](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles.html)

---

é€šè¿‡è¿™äº›æªæ–½ï¼Œåº”ç”¨ç°åœ¨èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†æ¨¡å‹å…¼å®¹æ€§é—®é¢˜ï¼Œä¸ºç”¨æˆ·æä¾›æ— ç¼çš„ä½“éªŒï¼ğŸ‰